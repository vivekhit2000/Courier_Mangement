<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homepage Profile</title>
  <link rel="stylesheet" href="/Courier_Mangement/Css/homepage_profile.css">
</head>

<body>
  <header class="header">
    <div class="left4">
      <!-- Left box for logo -->
      <img src="/Pics/vans-5630777.png" alt="">
      <div>CMS</div>
    </div>
    <div class="mid4">
      <ul class="navbar4">
        <li><a href="tracking.html">Tracking</a></li>
        <li><a href="#">Profile</a></li>
        <!-- Add additional navigation items as needed -->
        <li class="dropdown">
          <a class="dropdown-btn" href="#" onclick="toggleDropdown()">Shipments</a>
          <div id="shipmentsDropdown" class="dropdown-content">
            <a href="create_shipment.html">Create Shipment</a>
            <!-- <a href="#">Manage Shipments</a> -->
            <a href="myshipment.html">My Shipments</a>
          </div>
        </li>
        <li><a href="pricing.html">Pricing</a></li>
      </ul>
    </div>
    <div class="right4">
      <button class="btn">Contact</button>
      <button class="btn">Logout</button>
    </div>
  </header>

  <div class="container">
    <div id="userData"></div>
    <div class="home-button">
      <a href="homepage.html">Home</a>
    </div>
  </div>

  <script>
    // Retrieve the user data from local storage
    var userData = JSON.parse(localStorage.getItem("loggedInUser")) || {};

    // Function to populate the user data into the HTML element
    function displayUserData(user) {
      var userDataDiv = document.getElementById("userData");
      var htmlContent = "<h2>Welcome, " + (user.username ? user.username : "") + "!</h2>";

      if (user.email) {
        htmlContent += "<p>Email: " + user.email + "</p>";
      }

      if (user.dob) {
        htmlContent += "<p>DOB: " + user.dob + "</p>";
      }

      if (user.phone) {
        htmlContent += "<p>Phone: " + user.phone + "</p>";
      }

      if (user.gender) {
        htmlContent += "<p>Gender: " + user.gender + "</p>";
      }

      userDataDiv.innerHTML = htmlContent;
    }

    // Call the function to display the user data
    displayUserData(userData);

    // Function to toggle the dropdown menu
    function toggleDropdown() {
      var dropdown = document.querySelector('.dropdown');
      dropdown.classList.toggle('active');
    }

    // Logout button click event
    var logoutBtn = document.querySelector(".right4 button:last-child");
    logoutBtn.addEventListener("click", function() {
      // Clear the user data from local storage
      localStorage.removeItem("loggedInUser");

      // Redirect to the login page
      window.location.href = "login.html"; // Replace with your login page URL
    });

    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropdown-btn')) {
        var dropdowns = document.querySelectorAll('.dropdown');
        dropdowns.forEach(function(dropdown) {
          dropdown.classList.remove('active');
        });
      }
    }
  </script>
</body>

</html>
