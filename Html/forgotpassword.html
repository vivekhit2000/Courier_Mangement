<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courier Management Service</title>
    <link rel="stylesheet" href="/Css/forgotpassword.css">
</head>

<body>
    <div class="contain2">
        <form id="forgotPasswordForm">
            <div class="form2">
                <h3>Email</h3>
                <input type="email" id="email" placeholder="Enter your Email" required>
            </div>
            <h3>Choose Password</h3>
            <input type="password" id="newpassword" placeholder="New Password" required><br>
            <p></p>
            <input type="password" id="confirmpassword" placeholder="Confirm Password" required>
            <br>
            <button class="btn" type="submit">Verify</button>
        </form>
    </div>
    <script>
        // Get the form element
        var form = document.getElementById('forgotPasswordForm');

        // Listen for form submission
        form.addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent form submission

            // Get the entered email
            var email = document.getElementById('email').value;

            // Check if email exists in local storage
            var storedData = localStorage.getItem('userData');
            if (storedData) {
                var userData = JSON.parse(storedData);

                // Find the user with matching email
                var foundUser = userData.find(function (user) {
                    return user.email === email;
                });

                if (foundUser) {
                    // Generate a random password
                    var newPassword = document.getElementById("newpassword").value

                    // Update the user's password
                    foundUser.password = newPassword;

                    // Save the updated user data in local storage
                    localStorage.setItem('userData', JSON.stringify(userData));

                    // Display the new password to the user
                    alert('Your password has been reset. New password: ' + newPassword);
                } else {
                    // User not found
                    alert('Email not found. Please enter a valid email address.');
                }
            } else {
                // User data not found
                alert('User data not found. Please sign up or contact support.');
            }

            // Reset the form
            form.reset();
        });

        // Function to generate a random password
        function generateRandomPassword() {
            var length = 8;
            var charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            var password = '';
            for (var i = 0; i < length; i++) {
                var randomIndex = Math.floor(Math.random() * charset.length);
                password += charset.charAt(randomIndex);
            }
            return password;
        }
        F



    </script>

</body>

</html>